<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">(function() {var walkme = document.createElement('script'); walkme.type = 'text/javascript'; walkme.async = true; walkme.src = 'https://cdn.walkmeqa.com/users/cb60410bae2b4109a82aeed8c53515ad/test/walkme_cb60410bae2b4109a82aeed8c53515ad_https.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(walkme, s); window._walkmeConfig = {smartLoad:true}; })();</script>
  <style>
    .button-container1 {
      background-color: aqua;
      max-width: 90px;
      height: 60px;
      padding: 20px;
      border: 1px black dashed;
      margin: 20px;
    }
    .long {
      display: flex;
      width: 100%;
      height: 100%;
      background-color: rgb(158, 230, 92);
      flex-wrap: wrap;
    }
    #session-id-display {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background-color: yellow;
      padding: 10px;
      font-weight: bold;
      z-index: 9999;
    }
  </style>
</head>
<body>

<div id="session-id-display">Session ID will appear here</div>

<h1>My First Heading</h1>
<p>My first paragraph.</p>
<h1 class="title">Player Test Page</h1>

<div class="long">
  <div id="1st" class="button-container1">Element 1</div>
  <div id="2nd" class="button-container1">Element 2</div>
  <div id="3rd" class="button-container1">Element 3</div>
  <div id="4th" class="button-container1">Element 4</div>
  <div id="5th" class="button-container1">Element 5</div>
  <div id="6th" class="button-container1">Element 6</div>
  <div id="7th" class="button-container1">Element 7</div>
  <div id="8th" class="button-container1">Element 8</div>
</div>

<div>
  <form id="myForm">
    <label for="fname">First name:</label><br>
    <input type="text" id="fname" name="fname" value="John"><br>
    <label for="lname">Last name:</label><br>
    <input type="text" id="lname" name="lname" value="Doe"><br><br>
    <input type="submit" value="Submit">
  </form>
</div>

<script>
  document.getElementById('myForm').addEventListener('submit', function (e) {
    e.preventDefault(); // Stop form from submitting

    if (typeof WalkMeInsightsAPI !== 'undefined' && WalkMeInsightsAPI.closeSession) {
      WalkMeInsightsAPI.closeSession().then(() => {
        console.log('Session closed');

        // Wait briefly in case session is updated
        setTimeout(() => {
          const sessionId = _walkmeInternals?.ctx?.get('SessionManager')?.getCurrentSessionId?.();
          console.log('Current session ID:', sessionId);
          document.getElementById('session-id-display').textContent = 'Session ID: ' + (sessionId || 'Not Available');
        }, 500); // adjust timing as needed
      });
    } else {
      console.warn('WalkMeInsightsAPI or method not available');
    }
  });
</script>

</body>
</html>
